generator client {
  provider = "prisma-client"
  output   = "generated/prisma"
   previewFeatures     = ["driverAdapters", "queryCompiler", "relationJoins"]
  runtime             = "nodejs"
}

datasource db {
  provider = "postgresql"
}

model Journal {
  id        String   @id @default(cuid())
  title     String?
  content   String
  tradeId   String?  @unique // unique link to a trade
  owner     String   // wallet address of the journal owner (base58)
  symbol    String?
  side      String?
  pnl       Float?
  pnlPct    Float?   @map("pnlPercentage")
  transactionHash String?
  tradeTimestamp DateTime?
  tags      String[] @default([])
  aiAnalyzed Boolean   @default(false)
  
  // AI Coach & Analytics Fields
  aiInsights Json?    // Structured AI feedback (performanceCritique, emotionalReview, etc.)
  riskScore  Float?   // 0-100 risk score based on trade params
  magicTags  String[] @default([]) // AI-generated tags like #FOMO, #Revenge

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([owner])
  @@index([tradeId])
}

